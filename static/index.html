<!DOCTYPE html>
<html ng-app="scout">
  <head>
    <title></title>
    <meta http-equiv="Content-Security-Policy" content="default-src *; script-src 'self' 'unsafe-eval'; style-src 'self' 'unsafe-inline';">
    <script src="index.js"></script>
  </head>

  <body tabindex="-1" style="width: 100%; height: 100%">
    <header ng-controller="HeaderCtrl as header">
      <select class="topcoat-select http-method-select" ng-model="header.method">
        <option value="get">GET</option>
        <option value="put">PUT</option>
        <option value="post">POST</option>
        <option value="delete">DELETE</option>
      </select>

      <input type="text" placeholder="https://"
             ng-model="header.address" ng-enter="header.sendRequest()"
             class="topcoat-text-input--large address-bar"/>


      <button class="topcoat-button--large--quiet"
              ng-disabled="header.httpSrv.inProgress"
              ng-click="header.sendRequest()">
        <i class="fa fa-send fa-lg"></i>
      </button>
    </header>
    <div class="main-container">
      <div id="request-panel-group">
        <section id="request-build-panel" ng-controller="RequestPanelCtrl as rpc">
          <div class="panel-header"><div class="panel-title">Request:</div>
            <button ng-repeat="btn in rpc.nav.model"
                    ng-class="{'topcoat-button--cta': rpc.nav.selectedViewId === btn.targetViewId,
                               'topcoat-button--quiet': rpc.nav.selectedViewId !== btn.targetViewId}"
                    ng-disabled="rpc.nav.selectedViewId === btn.targetViewId"
                    ng-click="rpc.nav.select(btn.targetViewId)">
              <i class="{{btn.iconClass}}" ng-if="btn.iconClass"></i>
              <span ng-if="!btn.iconClass">{{btn.label}}</span>
            </button>
          </div>
          <div class="panel-container">
            <div class="panel-body"> <nav-view template="rpc.nav.selectedView"></nav-view> </div>
          </div>
        </section>

        <section id="request-preview-panel" ng-controller="ManagementPanelCtrl as man">
          <div class="panel-header">
            <button ng-repeat="btn in man.nav.model"
                    ng-class="{'topcoat-button--cta': man.nav.selectedViewId === btn.targetViewId,
                               'topcoat-button--quiet': man.nav.selectedViewId !== btn.targetViewId}"
                    ng-disabled="man.nav.selectedViewId === btn.targetViewId"
                    ng-click="man.nav.select(btn.targetViewId)">
              <i class="{{btn.iconClass}}" ng-if="btn.iconClass"></i>
              <span ng-if="!btn.iconClass">{{btn.label}}</span>
            </button>
          </div>
          <div class="panel-container">
            <div class="panel-body"> <nav-view template="man.nav.selectedView"></nav-view> </div>
          </div>
        </section>

        <div class="horizontal-resizer"
             resizer="horizontal"
             resizer-height="1"
             resizer-min="160"
             resizer-top="#request-build-panel"
             resizer-bottom="#request-preview-panel">
        </div>
      </div>

      <section id="response-panel" ng-controller="ResponsePanelCtrl as rpc">
        <div class="panel-header"><div class="panel-title">Response:</div>
          <button class="topcoat-button--cta">Headers</button>
          <button class="topcoat-button--quiet">Body</button>
          <button class="topcoat-button--quiet">Raw</button>
        </div>
        <div class="panel-container"><div class="panel-body">
          <table id="response-headers-table">
           <thead>
            <tr>
               <th>Header Name</th>
               <th>Header Value</th>
            </tr>
           </thead>
           <tbody>
            <tr ng-repeat="header in rpc.response.headers">
              <td class="response-header-name-cell">
                {{header.name}}
              </td>
              <td class="response-header-value-cell">
                {{header.value}}
              </td>
            </tr>
           </tbody>
          </table>
        </div></div>
      </section>

      <div class="vertical-resizer"
           resizer="vertical"
           resizer-width="1"
           resizer-min="380"
           resizer-left="#request-panel-group"
           resizer-right="#response-panel">
      </div>
    </div>

    <footer ng-controller="StatusBarCtrl as statusBar">

      <response-time ms="statusBar.httpSrv.lastResponseTime"
                     ng-class="{'hidden': !ms}"></response-time>

      <response-status code="statusBar.httpSrv.response.status"
                       ng-class="{'hidden': !code}"></response-status>

      <div class="spinner" ng-show="statusBar.httpSrv.inProgress"></div>
    </footer>
  </body>
</html>
